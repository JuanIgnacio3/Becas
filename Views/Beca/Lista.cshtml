@model IEnumerable<Becas.Models.SolicitudBeca>
@{
    ViewData["Title"] = "Lista de Solicitudes";
}

@if (User.IsInRole("Administrador") 
    || User.IsInRole("Revisor")
    || (User.Identity?.Name?.ToLower() == "profesor")
    || (User.Identity?.Name?.ToLower() == "coordinador"))
{
    <div class="contenedor-lista efecto-fade">

        <div class="encabezado-lista">
            <h2 class="titulo-lista">üìë Solicitudes registradas</h2>
            <p class="subtitulo-lista">Listado generado durante esta sesi√≥n</p>
        </div>

        <div class="envoltorio-tabla tarjeta-beca">
            <table class="tabla-beca">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>C√©dula</th>
                        <th>Cant√≥n</th>
                        <th>Tuvo beca</th>
                        <th>Detalle</th>
                        <th style="width:150px;">Acciones</th>
                    </tr>
                </thead>

                <tbody>
                    @if (Model != null && Model.Any())
                    {
                        foreach (var item in Model)
                        {
                            <tr>
                                <td>@Html.DisplayFor(m => item.NombreEstudiante)</td>
                                <td>@Html.DisplayFor(m => item.Cedula)</td>
                                <td>@Html.DisplayFor(m => item.Canton)</td>
                                <td>
                                    <span class="badge-estado @(item.TuvoBecaAnterior ? "estado-si" : "estado-no")">
                                        @(item.TuvoBecaAnterior ? "S√≠" : "No")
                                    </span>
                                </td>
                                <td>@Html.DisplayFor(m => item.Detalle)</td>

                                <td class="celda-acciones">
                                    <a href="@Url.Action("Create", "Beca")" class="btn-accion btn-extra">
                                        ‚ûï Solicitar otra
                                    </a>
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="6" class="sin-datos">
                                <div class="mensaje-vacio">
                                    <span class="emoji-vacio">üóÇÔ∏è</span>
                                    <p>No hay solicitudes registradas a√∫n.</p>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <div class="contenedor-volver">
            <a class="btn-volver" href="@Url.Action("Create", "Beca")">‚¨Ö Volver al formulario</a>
        </div>
    </div>
}
else
{
    <div class="contenedor-lista efecto-fade">
        <div class="tarjeta-beca mensaje-error">
            <h2 class="titulo-lista">üö´ Acceso no autorizado</h2>
            <p>No tienes permisos para ver la lista de solicitudes.</p>

            <a class="btn-volver" href="@Url.Action("Create", "Beca")">Volver</a>
        </div>
    </div>
}
